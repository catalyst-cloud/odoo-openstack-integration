<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- Form view for a project -->
        <record id="view_openstack_project_form" model="ir.ui.view">
            <field name="name">openstack.project.form</field>
            <field name="model">openstack.project</field>
            <field name="arch" type="xml">
                <form string="OpenStack Project">
                    <group col="4">
                        <field name="name" />
                        <field name="os_id" />
                        <field name="parent" />
                        <field name="enabled" />
                    </group>
                    <group col="4">
                        <field name="owner" />
                    </group>
                    <group col="4">
                        <field name="billing_type" />
                        <field name="group_invoices" />
                        <field name="payment_method" />
                        <field name="stripe_card_id" />
                        <field name="po_number" />
                        <field name="override_po_number" />
                    </group>
                    <group col="4">
                        <field name="support_subscription" />
                        <field name="create_date" />
                    </group>
                    <notebook>
                        <page string="Contacts">
                            <field
                                name="project_contacts"
                                string="Contacts"
                                context="{'default_project': id}">

                                <tree string="Partners">
                                    <field name="partner" />
                                    <field name="contact_type" />
                                </tree>

                            </field>
                        </page>
                        <page string="Credits">
                            <field
                                name="project_credits"
                                widget="one2many_list"
                                string="Credits"
                                context="{'default_project': id}" />
                        </page>
                        <page string="Grants">
                            <field
                                name="project_grants"
                                widget="one2many_list"
                                string="Grants"
                                context="{'default_project': id}" />
                        </page>
                    </notebook>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!-- Tree view for all projects -->
        <record id="view_openstack_project_tree" model="ir.ui.view">
            <field name="name">openstack.project.tree</field>
            <field name="model">openstack.project</field>
            <field name="arch" type="xml">
                <tree string="OpenStack Project">
                    <field name="name" />
                    <field name="os_id" />
                    <field name="payment_method" />
                    <field name="enabled" />
                    <field name="create_date" />
                </tree>
            </field>
        </record>

        <!-- Search functionality on projects -->
        <record id="view_openstack_project_filter" model="ir.ui.view">
            <field name="name">openstack.project.select</field>
            <field name="model">openstack.project</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Project">
                    <field name="name" />
                    <field name="os_id" />
                    <field name="parent" />
                    <field name="owner" />
                    <field name="billing_type" />
                    <field name="payment_method" />
                    <field name="po_number" />
                    <filter
                        string="Enabled"
                        name="filter_openstack_project"
                        domain="[('enabled', '=', 'True')]" />
                </search>
            </field>
        </record>

        <!-- Action to open the openstack projects list -->
        <!-- By default action filters for enabled -->
        <record id="action_openstack_project_form" model="ir.actions.act_window">
            <field name="name">OpenStack Projects</field>
            <field name="res_model">openstack.project</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{"search_default_filter_openstack_project":1}</field>
        </record>

        <!-- Menu item for openstack project -->
        <menuitem
            action="action_openstack_project_form"
            id="menu_action_openstack_project_form"
            parent="menu_openstack_main" sequence="3" />

    </data>
</odoo>
